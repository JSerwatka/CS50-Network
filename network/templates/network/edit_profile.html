{% extends "network/layout.html" %}

{% block extra_css %}
    {{ form.media.css }}
{% endblock %}

{% block body %}
<div class="create-listing-form">
    <form action="{% url 'network:edit-profile'%}" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            {{ form.name.label }}
            {{ form.name }}
        </div>
        <div class="form-group">
            {{ form.date_of_birth.label }}
            {{ form.date_of_birth }}
        </div>
        <div class="form-group">
            {{ form.about.label }}
            {{ form.about }}
        </div>
        <div class="form-group">
            {{ form.country.label }}
            {{ form.country }}
        </div>
        <div class="form-group">
            {{ form.image.label }}
            {{ form.image }}
        </div>
        <input class="btn btn-primary" type="submit">
        <button class="btn btn-primary" name="cancel" value="clicked">Cancel</button></a>  
    </form>
</div>
{% endblock %}

{% block script %}
    {{ form.media.js }}
    <!-- TODO: move scipt to separate file -->
    <script>
        let fileInput = document.querySelector("form input[type=file]");

        fileInput.addEventListener("change", (event) => {
            let file =  event.target.files[0];
            let fileSize = file.size / 1024 / 1024;
            let fileType = file.type;

            // Check if file is an image
            if (typeof fileType == "undefined" || fileType.indexOf("image") === -1) {
                alert("File must be an image!");
                fileInput.value = null ;              
            }
            // Check if file exceeds file size limit
            else if (fileSize > 5) {
                alert("File size exceeds 5 MB limit!");
                fileInput.value = null;
            }
        })
        
    </script>
{% endblock %}
            <!-- date-picker based on: https://github.com/monim67/django-flatpickr -->
